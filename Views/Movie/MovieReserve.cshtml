@using MovieStore.Models.Movie
@model Movie

@addTagHelper*, Microsoft.AspNetCore.Mvc.TagHelpers

@if ((bool)ViewData["Post"] == false)
{


    <!DOCTYPE html>
    <html>
    <head>
        <meta name="viewport" content="width=device-width" />
        <title>Index</title>
    </head>
    <body>
        <script type="text/javascript" src='https://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.3.min.js'></script>
        <script type="text/javascript" src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.0.3/js/bootstrap.min.js'></script>
        <link rel="stylesheet" href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.0.3/css/bootstrap.min.css'
              media="screen" />

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/css/bootstrap-datepicker.css" type="text/css" />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/js/bootstrap-datepicker.js" type="text/javascript"></script>

        <div style="width:100%">
            <form asp-controller="Movie" asp-action="MovieReserve" method="post">
                Reserve From:
                <input type="text" id="startDate" name="startDate" readonly="readonly" />
                <input type="submit" value="Submit" style="margin-left:10%" />
                To:
                <input type="text" id="endDate" name="endDate" readonly="readonly" />
                <input type="hidden" name="movieId" value="@Model.ApiId" />

                <script type="text/javascript">
                    $(function () {
                        $('#startDate').datepicker({
                            changeMonth: true,
                            changeYear: true,
                            format: "dd/mm/yyyy",
                            language: "tr"
                        });
                    });
                </script>
                @if (ViewBag.Message != null)
                {
                    <script type="text/javascript">
            $(function () {
                alert("@ViewBag.Message");
            });
                    </script>
                }


                <script type="text/javascript">
                    $(function () {
                        $('#endDate').datepicker({
                            changeMonth: true,
                            changeYear: true,
                            format: "dd/mm/yyyy",
                            language: "tr"
                        });
                    });
                </script>
                @if (ViewBag.Message != null)
                {
                    <script type="text/javascript">
            $(function () {
                alert("@ViewBag.Message");
            });
                    </script>
                }
            </form>

        </div>


    </body>
</html>
}
else
{
int status = (int)ViewData["Status"];
@switch (status)
{



    case (1):
        <p><em>Your movie @Model.Title has been successfully reserved.</em></p>

        <body>
            <div style="width: 100%;">
                <div style=" width: 50%; height: 100px;">
                    @Html.ActionLink("Search more movies.", "Index")
                </div>
            </div>
        </body>
        break;



    case (2):



        <html>
        <head>
            <meta name="viewport" content="width=device-width" />
            <title>Index</title>
        </head>
        <body>
            <script type="text/javascript" src='https://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.3.min.js'></script>
            <script type="text/javascript" src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.0.3/js/bootstrap.min.js'></script>
            <link rel="stylesheet" href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.0.3/css/bootstrap.min.css'
                  media="screen" />

            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/css/bootstrap-datepicker.css" type="text/css" />
            <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/js/bootstrap-datepicker.js" type="text/javascript"></script>

            <div style="width:100%">
                <form asp-controller="Movie" asp-action="MovieReserve" method="post">
                    Reserve From:
                    <input type="text" id="startDate" name="startDate" readonly="readonly" />
                    <input type="submit" value="Submit" style="margin-left:10%" />
                    To:
                    <input type="text" id="endDate" name="endDate" readonly="readonly" />
                    <input type="hidden" name="movieId" value="@Model.ApiId" />

                    <script type="text/javascript">
                        $(function () {
                            $('#startDate').datepicker({
                                changeMonth: true,
                                changeYear: true,
                                format: "dd/mm/yyyy",
                                language: "tr"
                            });
                        });
                    </script>
                    @if (ViewBag.Message != null)
                    {
                        <script type="text/javascript">
            $(function () {
                alert("@ViewBag.Message");
            });
                        </script>
                    }


                    <script type="text/javascript">
                        $(function () {
                            $('#endDate').datepicker({
                                changeMonth: true,
                                changeYear: true,
                                format: "dd/mm/yyyy",
                                language: "tr"
                            });
                        });
                    </script>
                    @if (ViewBag.Message != null)
                    {
                        <script type="text/javascript">
            $(function () {
                alert("@ViewBag.Message");
            });
                        </script>
                    }
                </form>


            </div>
            <p style="color:red;font-size:150%;"><em>The interval for reservation is not valid.</em></p>


        </body>
    </html>


    break;


case (3):
    <p><em>You already have this movie reserved.</em></p>

    <body>
        <div style="width: 100%;">
            <div style=" width: 50%; height: 100px;">
                @Html.ActionLink("Search more movies.", "Index")
            </div>
        </div>
        <div style="width: 100%;">
            <div style=" width: 50%; height: 200px;">
                @Html.ActionLink("Check your reservations", "Index", "MyMovies")
            </div>
        </div>
    </body>
    break;

case (4):

    <p><em>Unfortunately, this movie is not available at the moment.</em></p>

    <body>
        <div style="width: 100%;">
            <div style=" width: 50%; height: 100px;">
                @Html.ActionLink("Search more movies.", "Index")
            </div>
        </div>
    </body>

    break;

}


}
